// ============================================================================
// Task-1: Hello Web3 - ç¯å¢ƒæ­å»ºä¸åŸºç¡€é“¾ä¸Šè¿æ¥
// ä½¿ç”¨ Alloy åº“ï¼ˆæ–°ä¸€ä»£ Web3 æ¡†æ¶ï¼‰
// ============================================================================

use alloy::providers::{Provider, ProviderBuilder};
use eyre::Result;
use tracing::info;

#[tokio::main]
async fn main() -> Result<()> {
    // åˆå§‹åŒ–æ—¥å¿—
    tracing_subscriber::fmt::init();

    // --------------------------------------------------
    // 1. é…ç½® RPC èŠ‚ç‚¹åœ°å€
    // --------------------------------------------------
    let rpc_url = "https://sepolia-rollup.arbitrum.io/rpc".parse()?;

    // --------------------------------------------------
    // 2. æ„å»º Provider å®ä¾‹
    // --------------------------------------------------
    let provider = ProviderBuilder::new().on_http(rpc_url);

    info!("ğŸ“¡ æ­£åœ¨å°è¯•ä½¿ç”¨ Alloy æ¡†æ¶è¿æ¥ Arbitrum Sepolia...");

    // --------------------------------------------------
    // 3. å¼‚æ­¥è°ƒç”¨ï¼šè·å–æœ€æ–°åŒºå—å·
    // --------------------------------------------------
    match provider.get_block_number().await {
        Ok(block_num) => {
            info!("âœ… è¿æ¥æˆåŠŸï¼");
            info!("ğŸš€ Hello Web3 è¿è¡Œé¡ºåˆ©ï¼");
            info!("ğŸ“ å½“å‰æœ€æ–°åŒºå—é«˜åº¦æ˜¯: {}", block_num);
        }
        Err(e) => {
            eprintln!("âŒ è·å–åŒºå—é«˜åº¦å¤±è´¥: {:?}", e);
        }
    }

    Ok(())
}
